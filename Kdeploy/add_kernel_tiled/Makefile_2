
obj-m += add_kernel_mod.o
add_kernel_mod-objs := new.o add_kernel_tiled.o 

ASM_SRCS := $(wildcard *.asm)
ASM_OBJS := $(ASM_SRCS:.asm=.o)

PWD := $(CURDIR)

all: $(ASM_OBJS) modules

$(ASM_OBJS): %.o : %.asm
	as -o $@ $<
	touch .$@.cmd

modules:
	$(MAKE) -C /lib/modules/$(shell uname -r)/build M=$(PWD) modules

clean:
	$(MAKE) -C /lib/modules/$(shell uname -r)/build M=$(PWD) clean

